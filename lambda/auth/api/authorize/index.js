"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.handler = handler;
const config = require("leo-config");
const env = process.env.LEO_ENVIRONMENT;
const resourcesJson = JSON.parse(process.env.Resources);
config.bootstrap({ [env]: { leoaws: resourcesJson, leoauth: resourcesJson } });
var leoAuth = require("leo-auth");
async function handler(event, _) {
    const user = await leoAuth.authorize(event.body.event, event.body.resource);
    return {
        authorized: event.body.request_id,
        user: user
    };
}
;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJpbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxZQUFZLENBQUM7O0FBV2IsMEJBTUM7QUFmRCxNQUFNLE1BQU0sR0FBRyxPQUFPLENBQUMsWUFBWSxDQUFDLENBQUM7QUFDckMsTUFBTSxHQUFHLEdBQUcsT0FBTyxDQUFDLEdBQUcsQ0FBQyxlQUF5QixDQUFBO0FBQ2pELE1BQU0sYUFBYSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxTQUFtQixDQUFDLENBQUM7QUFDbEUsTUFBTSxDQUFDLFNBQVMsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLEVBQUUsRUFBRSxNQUFNLEVBQUUsYUFBYSxFQUFFLE9BQU8sRUFBRSxhQUFhLEVBQUUsRUFBRSxDQUFDLENBQUE7QUFDOUUsSUFBSSxPQUFPLEdBQUcsT0FBTyxDQUFDLFVBQVUsQ0FBQyxDQUFDO0FBSzNCLEtBQUssVUFBVSxPQUFPLENBQUMsS0FBWSxFQUFFLENBQU07SUFDaEQsTUFBTSxJQUFJLEdBQUcsTUFBTSxPQUFPLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLEtBQUssQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUE7SUFDM0UsT0FBTztRQUNMLFVBQVUsRUFBRSxLQUFLLENBQUMsSUFBSSxDQUFDLFVBQVU7UUFDakMsSUFBSSxFQUFFLElBQUk7S0FDWCxDQUFBO0FBQ0gsQ0FBQztBQUFBLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuY29uc3QgY29uZmlnID0gcmVxdWlyZShcImxlby1jb25maWdcIik7XG5jb25zdCBlbnYgPSBwcm9jZXNzLmVudi5MRU9fRU5WSVJPTk1FTlQgYXMgc3RyaW5nXG5jb25zdCByZXNvdXJjZXNKc29uID0gSlNPTi5wYXJzZShwcm9jZXNzLmVudi5SZXNvdXJjZXMgYXMgc3RyaW5nKTtcbmNvbmZpZy5ib290c3RyYXAoeyBbZW52XTogeyBsZW9hd3M6IHJlc291cmNlc0pzb24sIGxlb2F1dGg6IHJlc291cmNlc0pzb24gfSB9KVxudmFyIGxlb0F1dGggPSByZXF1aXJlKFwibGVvLWF1dGhcIik7XG5cbmV4cG9ydCBpbnRlcmZhY2UgRXZlbnRCb2R5IHsgcmVxdWVzdENvbnRleHQ6IHsgaWRlbnRpdHk6IHsgY29nbml0b0lkZW50aXR5SWQ6IHN0cmluZyB9IH07IH1cbmV4cG9ydCBpbnRlcmZhY2UgRXZlbnQgeyBib2R5OiB7IGV2ZW50OiBFdmVudEJvZHk7IHJlc291cmNlOiB7IGxybjogc3RyaW5nIH07IHJlcXVlc3RfaWQ6IGFueTsgfSB9XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKGV2ZW50OiBFdmVudCwgXzogYW55KSB7XG4gIGNvbnN0IHVzZXIgPSBhd2FpdCBsZW9BdXRoLmF1dGhvcml6ZShldmVudC5ib2R5LmV2ZW50LCBldmVudC5ib2R5LnJlc291cmNlKVxuICByZXR1cm4ge1xuICAgIGF1dGhvcml6ZWQ6IGV2ZW50LmJvZHkucmVxdWVzdF9pZCxcbiAgICB1c2VyOiB1c2VyXG4gIH1cbn07XG5cbiJdfQ==