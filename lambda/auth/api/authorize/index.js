"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.handler = void 0;
const config = require("leo-config");
const env = process.env.LEO_ENVIRONMENT;
const resourcesJson = JSON.parse(process.env.Resources);
config.bootstrap({ [env]: { leoaws: resourcesJson, leoauth: resourcesJson } });
var leoAuth = require("leo-auth");
async function handler(event, _) {
    const user = await leoAuth.authorize(event.body.event, event.body.resource);
    return {
        authorized: event.body.request_id,
        user: user
    };
}
exports.handler = handler;
;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJpbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxZQUFZLENBQUM7OztBQUViLE1BQU0sTUFBTSxHQUFHLE9BQU8sQ0FBQyxZQUFZLENBQUMsQ0FBQztBQUNyQyxNQUFNLEdBQUcsR0FBRyxPQUFPLENBQUMsR0FBRyxDQUFDLGVBQXlCLENBQUE7QUFDakQsTUFBTSxhQUFhLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLFNBQW1CLENBQUMsQ0FBQztBQUNsRSxNQUFNLENBQUMsU0FBUyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsRUFBRSxFQUFFLE1BQU0sRUFBRSxhQUFhLEVBQUUsT0FBTyxFQUFFLGFBQWEsRUFBRSxFQUFFLENBQUMsQ0FBQTtBQUM5RSxJQUFJLE9BQU8sR0FBRyxPQUFPLENBQUMsVUFBVSxDQUFDLENBQUM7QUFLM0IsS0FBSyxVQUFVLE9BQU8sQ0FBQyxLQUFZLEVBQUUsQ0FBTTtJQUNoRCxNQUFNLElBQUksR0FBRyxNQUFNLE9BQU8sQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsS0FBSyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQTtJQUMzRSxPQUFPO1FBQ0wsVUFBVSxFQUFFLEtBQUssQ0FBQyxJQUFJLENBQUMsVUFBVTtRQUNqQyxJQUFJLEVBQUUsSUFBSTtLQUNYLENBQUE7QUFDSCxDQUFDO0FBTkQsMEJBTUM7QUFBQSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbmNvbnN0IGNvbmZpZyA9IHJlcXVpcmUoXCJsZW8tY29uZmlnXCIpO1xuY29uc3QgZW52ID0gcHJvY2Vzcy5lbnYuTEVPX0VOVklST05NRU5UIGFzIHN0cmluZ1xuY29uc3QgcmVzb3VyY2VzSnNvbiA9IEpTT04ucGFyc2UocHJvY2Vzcy5lbnYuUmVzb3VyY2VzIGFzIHN0cmluZyk7XG5jb25maWcuYm9vdHN0cmFwKHsgW2Vudl06IHsgbGVvYXdzOiByZXNvdXJjZXNKc29uLCBsZW9hdXRoOiByZXNvdXJjZXNKc29uIH0gfSlcbnZhciBsZW9BdXRoID0gcmVxdWlyZShcImxlby1hdXRoXCIpO1xuXG5leHBvcnQgaW50ZXJmYWNlIEV2ZW50Qm9keSB7IHJlcXVlc3RDb250ZXh0OiB7IGlkZW50aXR5OiB7IGNvZ25pdG9JZGVudGl0eUlkOiBzdHJpbmcgfSB9OyB9XG5leHBvcnQgaW50ZXJmYWNlIEV2ZW50IHsgYm9keTogeyBldmVudDogRXZlbnRCb2R5OyByZXNvdXJjZTogeyBscm46IHN0cmluZyB9OyByZXF1ZXN0X2lkOiBhbnk7IH0gfVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihldmVudDogRXZlbnQsIF86IGFueSkge1xuICBjb25zdCB1c2VyID0gYXdhaXQgbGVvQXV0aC5hdXRob3JpemUoZXZlbnQuYm9keS5ldmVudCwgZXZlbnQuYm9keS5yZXNvdXJjZSlcbiAgcmV0dXJuIHtcbiAgICBhdXRob3JpemVkOiBldmVudC5ib2R5LnJlcXVlc3RfaWQsXG4gICAgdXNlcjogdXNlclxuICB9XG59O1xuXG4iXX0=